{% extends 'base.html' %}
{% block content %}


{% load staticfiles %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

<link href="{% static 'css/shop-homepage.css' %}" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.5/angular.js"></script>
<script src="{% static 'js/ui-bootstrap-tpls-0.10.0.js' %}"></script>
</head>



<body>

    <div class="container">

        <div class="row">

            <div class="col-md-3">
                <p class="lead">Textile Fabrics Consultants, Inc.</p>
               <div class="panel-group" id="accordion">
  {%for fabCatagory in fab_categories%}
  <div class="panel panel-primary">
    <div class="panel-heading"> 
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" data-target="#{{fabCatagory}}" > 
          {{fabCatagory}}
        </a>
      </h4>
    </div>
    <div id="{{fabCatagory}}" class="panel-collapse collapse">
      <div class="panel-body">
        
             <div class="list-group">

                      {%for fabCatagory in topics %}
                                    {%if {{fabCatagory}} == "Fibers"%}
                                    
                                    <a href="/companion/category/{{ fabCatagory }}" class="list-group-item">{{ fabCatagory.topic }}</a>
                                    {%endif%}
                                
                                
                      {% endfor %}
            </div>       
        
      </div>
    </div>
  </div>
  {%endfor%}
</div>

    


            </div>
	   	
            <div class="col-md-9">
			
    			

	<form class="form-signin span8" id="searchForm" method="POST" >
            {% csrf_token %}
            <!-- Display the search form elements here -->
            <input type="text" size="50" name="query" value="" id="query" />
            <button id="searchBtn" class="btn btn-primary" type="button"  value="Search">Search</button>
            <br />
        </form>
	<script>
	
	$('#searchBtn').click(function(){
                                $.ajax({//begin


                                        type: 'GET',
					data: $("#searchForm").serialize(),
                                        url:  '.',
                                        success: function(result){
					     if(result){
                                                console.log("searched")
						$('#carousel-example-generic').hide();
						$('.row-fluid').hide();
						
					     }
                                               

                                         }//end success




                                        });//end ajax

                                        });
         </script>		

		
                <div class="row-fluid">
		
		<!--Fabric
                    
		  <div  class="col-sm-4 col-lg-4 col-md-4">
                        <div  class="thumbnail">
                            <img src="{{ category.picture }}" alt="">
                            <div class="caption">
                                <h4 class="pull-right">${{ category.price }}</h4>
                                <h4><a  data-toggle="modal" data-target="#{{ category.itemNameid }}">{{ category.itemName }}</a>
                                </h4>
                            </div>

                        </div>
                    </div>
		  
		-->

		
                
		   
                </div>
	    <div class="row text-center">
		<ul class="pagination">
  			<li><a href="#">&laquo;</a></li>
  			<li><a href="#">1</a></li>
  			<li><a href="#">2</a></li>
  			<li><a href="#">3</a></li>
  			<li><a href="#">4</a></li>
  			<li><a href="#">5</a></li>
  			<li><a href="#">&raquo;</a></li>
		</ul>
	    </div>
            </div>

        </div>

    </div>
    <!-- /.container -->

    <div class="container">

        <hr>

        

    </div>
    <!-- /.container -->
    <!-- JavaScript -->
    

</body>
{% for category in items %}
<!-- Modal -->
<div class="modal fade" id="{{ category.itemNameid }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

       <h4 class="modal-title" id="myModalLabel"><span class="label label-success">{{ category.itemName }}</span></h4>
      </div>
      <div class="modal-body row">
	 <div class="span6">
       
   		<div class="row text-center">
        		<img data-toggle="magnify" src="{{ category.picture }}" alt="">
		</div>
	</div>
	<div class="span6">
	
    		{{ category.description }}
  	</div>
         
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Add To Cart</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  
  /*
Credits:
https://github.com/marcaube/bootstrap-magnify
*/


!function ($) {

    "use strict"; // jshint ;_;


    /* MAGNIFY PUBLIC CLASS DEFINITION
     * =============================== */

    var Magnify = function (element, options) {
        this.init('magnify', element, options)
    }

    Magnify.prototype = {

        constructor: Magnify

        , init: function (type, element, options) {
            var event = 'mousemove'
                , eventOut = 'mouseleave';

            this.type = type
            this.$element = $(element)
            this.options = this.getOptions(options)
            this.nativeWidth = 0
            this.nativeHeight = 0

            this.$element.wrap('<div class="magnify" \>');
            this.$element.parent('.magnify').append('<div class="magnify-large" \>');
            this.$element.siblings(".magnify-large").css("background","url('" + this.$element.attr("src") + "') no-repeat");

            this.$element.parent('.magnify').on(event + '.' + this.type, $.proxy(this.check, this));
            this.$element.parent('.magnify').on(eventOut + '.' + this.type, $.proxy(this.check, this));
        }

        , getOptions: function (options) {
            options = $.extend({}, $.fn[this.type].defaults, options, this.$element.data())

            if (options.delay && typeof options.delay == 'number') {
                options.delay = {
                    show: options.delay
                    , hide: options.delay
                }
            }

            return options
        }

        , check: function (e) {
            var container = $(e.currentTarget);
            var self = container.children('img');
            var mag = container.children(".magnify-large");

            // Get the native dimensions of the image
            if(!this.nativeWidth && !this.nativeHeight) {
                var image = new Image();
                image.src = self.attr("src");

                this.nativeWidth = image.width;
                this.nativeHeight = image.height;

            } else {

                var magnifyOffset = container.offset();
                var mx = e.pageX - magnifyOffset.left;
                var my = e.pageY - magnifyOffset.top;

                if (mx < container.width() && my < container.height() && mx > 0 && my > 0) {
                    mag.fadeIn(100);
                } else {
                    mag.fadeOut(100);
                }

                if(mag.is(":visible"))
                {
                    var rx = Math.round(mx/container.width()*this.nativeWidth - mag.width()/2)*-1;
                    var ry = Math.round(my/container.height()*this.nativeHeight - mag.height()/2)*-1;
                    var bgp = rx + "px " + ry + "px";

                    var px = mx - mag.width()/2;
                    var py = my - mag.height()/2;

                    mag.css({left: px, top: py, backgroundPosition: bgp});
                }
            }

        }
    }


    /* MAGNIFY PLUGIN DEFINITION
     * ========================= */

    $.fn.magnify = function ( option ) {
        return this.each(function () {
            var $this = $(this)
                , data = $this.data('magnify')
                , options = typeof option == 'object' && option
            if (!data) $this.data('tooltip', (data = new Magnify(this, options)))
            if (typeof option == 'string') data[option]()
        })
    }

    $.fn.magnify.Constructor = Magnify

    $.fn.magnify.defaults = {
        delay: 0
    }


    /* MAGNIFY DATA-API
     * ================ */

    $(window).on('load', function () {
        $('[data-toggle="magnify"]').each(function () {
            var $mag = $(this);
            $mag.magnify()
        })
    })

} ( window.jQuery );
</script>
{% endfor %}
{% endblock %}

